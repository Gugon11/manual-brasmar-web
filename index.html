<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brasmar Platform — Manual de Sistema</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;0,600;1,300&family=Syne:wght@400;600;700;800&display=swap"
    rel="stylesheet">
  <style>
    /* ═══════════════════════════════════════════════════════════════
   VARIÁVEIS E RESET
═══════════════════════════════════════════════════════════════ */
    :root {
      --bg: #05090F;
      --bg-2: #080E18;
      --surface: #0C1525;
      --surface-2: #101E33;
      --border: #162035;
      --border-2: #1E2F4A;
      --amber: #F59E0B;
      --amber-dim: rgba(245, 158, 11, .12);
      --amber-glow: rgba(245, 158, 11, .35);
      --blue: #38BDF8;
      --blue-dim: rgba(56, 189, 248, .12);
      --green: #34D399;
      --green-dim: rgba(52, 211, 153, .1);
      --red: #F87171;
      --red-dim: rgba(248, 113, 113, .1);
      --text: #D9E4F0;
      --text-muted: #5A7393;
      --text-faint: #2D4460;
      --sidebar-w: 260px;
      --serif: 'DM Serif Display', Georgia, serif;
      --mono: 'IBM Plex Mono', 'Courier New', monospace;
      --ui: 'Syne', sans-serif;
      --radius: 6px;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--mono);
      font-size: 14px;
      line-height: 1.7;
      overflow-x: hidden;
    }

    ::selection {
      background: var(--amber-dim);
      color: var(--amber);
    }

    /* ═══════════════════════════════════════════════════════════════
   SIDEBAR
═══════════════════════════════════════════════════════════════ */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: var(--sidebar-w);
      height: 100vh;
      background: var(--bg-2);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      z-index: 100;
      overflow: hidden;
    }

    .sidebar-progress {
      position: absolute;
      top: 0;
      left: 0;
      width: 2px;
      height: 0%;
      background: var(--amber);
      transition: height .3s ease;
      box-shadow: 0 0 12px var(--amber-glow);
    }

    .sidebar-brand {
      padding: 28px 24px 20px;
      border-bottom: 1px solid var(--border);
    }

    .brand-name {
      font-family: var(--ui);
      font-weight: 800;
      font-size: 18px;
      letter-spacing: .15em;
      color: var(--amber);
      display: block;
    }

    .brand-sub {
      font-size: 10px;
      color: var(--text-muted);
      letter-spacing: .08em;
      text-transform: uppercase;
      display: block;
      margin-top: 4px;
    }

    .nav-list {
      list-style: none;
      padding: 16px 0;
      flex: 1;
      overflow-y: auto;
    }

    .nav-list::-webkit-scrollbar {
      width: 0;
    }

    .nav-item {
      position: relative;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 9px 24px;
      text-decoration: none;
      color: var(--text-muted);
      font-size: 11.5px;
      letter-spacing: .04em;
      transition: all .2s;
      position: relative;
    }

    .nav-link::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 2px;
      height: 100%;
      background: var(--amber);
      transform: scaleY(0);
      transition: transform .2s;
      box-shadow: 0 0 8px var(--amber-glow);
    }

    .nav-link.active,
    .nav-link:hover {
      color: var(--text);
      background: var(--amber-dim);
    }

    .nav-link.active::before {
      transform: scaleY(1);
    }

    .nav-num {
      font-size: 10px;
      color: var(--text-faint);
      font-weight: 600;
      min-width: 18px;
    }

    .nav-link.active .nav-num {
      color: var(--amber);
    }

    .nav-dot {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: var(--text-faint);
      flex-shrink: 0;
      transition: all .2s;
    }

    .nav-link.active .nav-dot,
    .nav-link:hover .nav-dot {
      background: var(--amber);
      box-shadow: 0 0 6px var(--amber-glow);
    }

    .sidebar-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      font-size: 10px;
      color: var(--text-faint);
    }

    .sidebar-footer span {
      display: block;
    }

    /* ═══════════════════════════════════════════════════════════════
   MAIN LAYOUT
═══════════════════════════════════════════════════════════════ */
    .main {
      margin-left: var(--sidebar-w);
      min-height: 100vh;
    }

    /* ═══════════════════════════════════════════════════════════════
   HERO
═══════════════════════════════════════════════════════════════ */
    .hero {
      position: relative;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 80px 80px 60px;
      overflow: hidden;
    }

    /* Animated grid background */
    .hero-grid {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(var(--border) 1px, transparent 1px),
        linear-gradient(90deg, var(--border) 1px, transparent 1px);
      background-size: 60px 60px;
      opacity: .4;
      animation: gridDrift 30s linear infinite;
    }

    @keyframes gridDrift {
      0% {
        transform: translateY(0);
      }

      100% {
        transform: translateY(60px);
      }
    }

    /* Radial glow */
    .hero::after {
      content: '';
      position: absolute;
      top: 10%;
      left: 15%;
      width: 600px;
      height: 600px;
      background: radial-gradient(ellipse at center,
          rgba(245, 158, 11, .06) 0%,
          transparent 70%);
      pointer-events: none;
    }

    .hero-content {
      position: relative;
      z-index: 2;
    }

    .hero-eyebrow {
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing: .2em;
      color: var(--amber);
      text-transform: uppercase;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .hero-eyebrow::before {
      content: '';
      display: block;
      width: 40px;
      height: 1px;
      background: var(--amber);
      box-shadow: 0 0 6px var(--amber-glow);
    }

    .hero-title {
      font-family: var(--ui);
      font-weight: 800;
      font-size: clamp(60px, 8vw, 110px);
      letter-spacing: -.02em;
      line-height: 1;
      color: var(--text);
      margin-bottom: 12px;
      position: relative;
    }

    .hero-title span {
      color: var(--amber);
      text-shadow: 0 0 60px rgba(245, 158, 11, .3);
    }

    .hero-subtitle {
      font-family: var(--serif);
      font-size: clamp(18px, 2.5vw, 26px);
      color: var(--text-muted);
      font-style: italic;
      margin-bottom: 40px;
    }

    .hero-divider {
      width: 80px;
      height: 1px;
      background: linear-gradient(90deg, var(--amber), transparent);
      margin-bottom: 40px;
      box-shadow: 0 0 8px var(--amber-glow);
    }

    .hero-modules {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 60px;
    }

    .module-tag {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border: 1px solid var(--border-2);
      border-radius: var(--radius);
      font-size: 11px;
      letter-spacing: .06em;
      color: var(--text-muted);
      transition: all .3s;
      background: var(--surface);
    }

    .module-tag:hover {
      border-color: var(--amber);
      color: var(--text);
      background: var(--amber-dim);
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
    }

    .dot-amber {
      background: var(--amber);
      box-shadow: 0 0 8px var(--amber-glow);
    }

    .dot-blue {
      background: var(--blue);
      box-shadow: 0 0 8px rgba(56, 189, 248, .4);
    }

    .dot-green {
      background: var(--green);
      box-shadow: 0 0 8px rgba(52, 211, 153, .4);
    }

    .hero-meta {
      display: flex;
      gap: 32px;
      font-size: 11px;
      color: var(--text-faint);
    }

    .hero-meta span {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .scroll-hint {
      position: absolute;
      bottom: 32px;
      left: 80px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 10px;
      letter-spacing: .12em;
      color: var(--text-faint);
      text-transform: uppercase;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: .4;
      }

      50% {
        opacity: 1;
      }
    }

    .scroll-hint::after {
      content: '';
      display: block;
      width: 1px;
      height: 30px;
      background: linear-gradient(to bottom, var(--text-faint), transparent);
    }

    /* ═══════════════════════════════════════════════════════════════
   SECTION BASE
═══════════════════════════════════════════════════════════════ */
    .section {
      padding: 80px 80px;
      border-top: 1px solid var(--border);
      position: relative;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity .6s ease, transform .6s ease;
    }

    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .section-num {
      position: absolute;
      top: 60px;
      right: 80px;
      font-family: var(--ui);
      font-weight: 800;
      font-size: 140px;
      color: var(--text-faint);
      opacity: .07;
      line-height: 1;
      pointer-events: none;
      user-select: none;
    }

    .section-eyebrow {
      font-size: 10px;
      letter-spacing: .2em;
      color: var(--amber);
      text-transform: uppercase;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-eyebrow::before {
      content: '';
      width: 20px;
      height: 1px;
      background: var(--amber);
    }

    .section-title {
      font-family: var(--ui);
      font-weight: 700;
      font-size: clamp(28px, 3.5vw, 46px);
      line-height: 1.1;
      margin-bottom: 8px;
      letter-spacing: -.02em;
    }

    .section-lead {
      font-family: var(--serif);
      font-style: italic;
      font-size: 17px;
      color: var(--text-muted);
      margin-bottom: 48px;
      max-width: 680px;
    }

    /* ═══════════════════════════════════════════════════════════════
   MODULE CARDS (Resumo)
═══════════════════════════════════════════════════════════════ */
    .module-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 40px;
    }

    .module-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px;
      position: relative;
      overflow: hidden;
      transition: all .3s;
      cursor: default;
    }

    .module-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
    }

    .card-portal::before {
      background: var(--amber);
      box-shadow: 0 0 12px var(--amber-glow);
    }

    .card-routing::before {
      background: var(--blue);
      box-shadow: 0 0 12px rgba(56, 189, 248, .4);
    }

    .card-tunnel::before {
      background: var(--green);
      box-shadow: 0 0 12px rgba(52, 211, 153, .4);
    }

    .module-card:hover {
      border-color: var(--border-2);
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(0, 0, 0, .4);
    }

    .card-icon {
      font-size: 28px;
      margin-bottom: 14px;
      display: block;
      color: var(--text);
      line-height: 1;
    }

    .card-portal .card-icon {
      color: var(--amber);
    }

    .card-routing .card-icon {
      color: var(--blue);
    }

    .card-tunnel .card-icon {
      color: var(--green);
    }

    .icon-svg {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      vertical-align: middle;
      line-height: 0;
    }

    .icon-svg svg {
      width: 1em;
      height: 1em;
      display: block;
      stroke: currentColor;
      fill: none;
      stroke-width: 1.8;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .card-title {
      font-family: var(--ui);
      font-weight: 700;
      font-size: 15px;
      letter-spacing: .04em;
      margin-bottom: 6px;
    }

    .card-port {
      font-size: 11px;
      color: var(--amber);
      margin-bottom: 14px;
      font-family: var(--mono);
    }

    .card-desc {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 18px;
    }

    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .tech-tag {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 3px;
      letter-spacing: .04em;
      background: var(--bg);
      border: 1px solid var(--border-2);
      color: var(--text-muted);
    }

    /* ═══════════════════════════════════════════════════════════════
   ARCHITECTURE DIAGRAM
═══════════════════════════════════════════════════════════════ */
    .arch-diagram {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 40px;
      margin: 40px 0;
      overflow: hidden;
    }

    .arch-svg {
      width: 100%;
      height: auto;
      max-height: 380px;
    }

    /* SVG styles */
    .svc-rect {
      rx: 6;
      fill: var(--bg-2, #080E18);
      stroke-width: 1;
    }

    .svc-nginx {
      stroke: #F59E0B;
    }

    .svc-kc {
      stroke: #38BDF8;
    }

    .svc-portal {
      stroke: #F59E0B;
    }

    .svc-routing {
      stroke: #818CF8;
    }

    .svc-tunnel {
      stroke: #34D399;
    }

    .svc-pg {
      stroke: #64748B;
    }

    .conn-line {
      fill: none;
      stroke-width: 1.5;
      stroke-dasharray: 6 4;
      stroke-linecap: round;
      opacity: .5;
    }

    .conn-amber {
      stroke: #F59E0B;
      animation: dashMove 2s linear infinite;
    }

    .conn-blue {
      stroke: #38BDF8;
      animation: dashMove 2.5s linear infinite;
    }

    .conn-violet {
      stroke: #818CF8;
      animation: dashMove 3s linear infinite;
    }

    .conn-green {
      stroke: #34D399;
      animation: dashMove 3.5s linear infinite;
    }

    .conn-gray {
      stroke: #64748B;
      animation: dashMove 4s linear infinite;
    }

    @keyframes dashMove {
      to {
        stroke-dashoffset: -40;
      }
    }

    .flow-dot {
      r: 4;
    }

    /* ═══════════════════════════════════════════════════════════════
   PORT TABLE & TABLES
═══════════════════════════════════════════════════════════════ */
    .table-wrap {
      overflow-x: auto;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin: 24px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12.5px;
    }

    thead th {
      background: var(--surface);
      padding: 12px 18px;
      text-align: left;
      font-family: var(--ui);
      font-weight: 600;
      font-size: 10px;
      letter-spacing: .1em;
      text-transform: uppercase;
      color: var(--text-muted);
      border-bottom: 1px solid var(--border);
    }

    tbody tr {
      border-bottom: 1px solid var(--border);
      transition: background .15s;
    }

    tbody tr:last-child {
      border-bottom: none;
    }

    tbody tr:hover {
      background: var(--surface);
    }

    tbody td {
      padding: 11px 18px;
      vertical-align: top;
      color: var(--text);
    }

    .td-mono {
      font-family: var(--mono);
      font-size: 12px;
    }

    .td-muted {
      color: var(--text-muted);
    }

    /* ═══════════════════════════════════════════════════════════════
   CODE BLOCKS
═══════════════════════════════════════════════════════════════ */
    .code-block {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 20px 0;
      font-size: 12px;
    }

    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 16px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
    }

    .code-title {
      font-size: 10px;
      letter-spacing: .1em;
      color: var(--text-muted);
      text-transform: uppercase;
      font-family: var(--ui);
      font-weight: 600;
    }

    .code-lang {
      font-size: 10px;
      color: var(--amber);
      letter-spacing: .06em;
    }

    .code-body {
      padding: 20px;
      overflow-x: auto;
      line-height: 1.65;
    }

    .code-body::-webkit-scrollbar {
      height: 4px;
    }

    .code-body::-webkit-scrollbar-track {
      background: var(--bg);
    }

    .code-body::-webkit-scrollbar-thumb {
      background: var(--border-2);
      border-radius: 2px;
    }

    pre {
      white-space: pre;
      font-family: var(--mono);
      color: var(--text);
    }

    /* Syntax highlighting */
    .kw {
      color: #38BDF8;
    }

    /* keywords */
    .st {
      color: #34D399;
    }

    /* strings */
    .cm {
      color: #374E6A;
      font-style: italic;
    }

    /* comments */
    .nm {
      color: #F59E0B;
    }

    /* numbers/names */
    .op {
      color: #818CF8;
    }

    /* operators/directives */
    .pu {
      color: #F9A8D4;
    }

    /* punctuation */

    /* ═══════════════════════════════════════════════════════════════
   CAMERA GRID
═══════════════════════════════════════════════════════════════ */
    .camera-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
      margin: 28px 0;
    }

    .camera-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      position: relative;
      transition: all .25s;
    }

    .camera-card:hover {
      border-color: var(--border-2);
      transform: translateY(-1px);
    }

    .camera-card.enabled {
      border-top: 2px solid var(--blue);
    }

    .camera-card.disabled {
      border-top: 2px solid var(--border-2);
      opacity: .5;
    }

    .cam-id {
      font-family: var(--ui);
      font-weight: 700;
      font-size: 13px;
      letter-spacing: .04em;
      margin-bottom: 4px;
    }

    .cam-location {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .cam-ip {
      font-size: 10.5px;
      color: var(--blue);
      font-family: var(--mono);
      margin-bottom: 10px;
    }

    .cam-status {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 9.5px;
      letter-spacing: .08em;
      text-transform: uppercase;
      font-weight: 600;
    }

    .status-on {
      color: var(--green);
    }

    .status-off {
      color: var(--text-faint);
    }

    .status-led {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .led-on {
      background: var(--green);
      box-shadow: 0 0 6px rgba(52, 211, 153, .6);
      animation: blink 2s ease-in-out infinite;
    }

    .led-off {
      background: var(--text-faint);
    }

    @keyframes blink {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: .4;
      }
    }

    .cam-caps {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 10px;
    }

    .cap-badge {
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 3px;
      background: var(--bg);
      border: 1px solid var(--border-2);
      color: var(--text-muted);
    }

    .sequence-arrow {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 20px 0 8px;
      font-size: 10px;
      color: var(--text-muted);
      letter-spacing: .08em;
      text-transform: uppercase;
    }

    .sequence-line {
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, var(--border-2), transparent);
    }

    /* ═══════════════════════════════════════════════════════════════
   PIPELINE FLOW
═══════════════════════════════════════════════════════════════ */
    .pipeline {
      display: flex;
      align-items: stretch;
      gap: 0;
      margin: 32px 0;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .pipeline-step {
      flex: 1;
      min-width: 120px;
      text-align: center;
      position: relative;
    }

    .step-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px 12px;
      height: 100%;
      transition: all .25s;
    }

    .step-box:hover {
      border-color: var(--amber);
      background: var(--amber-dim);
    }

    .step-num {
      font-family: var(--ui);
      font-weight: 800;
      font-size: 20px;
      color: var(--text-faint);
      margin-bottom: 6px;
    }

    .step-name {
      font-family: var(--ui);
      font-weight: 600;
      font-size: 11px;
      letter-spacing: .04em;
      margin-bottom: 5px;
    }

    .step-desc {
      font-size: 10px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .step-arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 8px;
      flex-shrink: 0;
      color: var(--amber);
      font-size: 16px;
      opacity: .5;
    }

    /* ═══════════════════════════════════════════════════════════════
   LINE TYPES (virtual lines)
═══════════════════════════════════════════════════════════════ */
    .line-types {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin: 24px 0;
    }

    .line-type {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 14px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      transition: border-color .2s;
    }

    .line-type:hover {
      border-color: var(--border-2);
    }

    .line-color-bar {
      width: 3px;
      border-radius: 2px;
      align-self: stretch;
      flex-shrink: 0;
      min-height: 40px;
    }

    .line-info {
      flex: 1;
    }

    .line-name {
      font-family: var(--ui);
      font-weight: 600;
      font-size: 11px;
      letter-spacing: .04em;
      margin-bottom: 4px;
    }

    .line-desc {
      font-size: 11px;
      color: var(--text-muted);
    }

    /* ═══════════════════════════════════════════════════════════════
   AUTH FLOW
═══════════════════════════════════════════════════════════════ */
    .auth-flow {
      display: flex;
      flex-direction: column;
      gap: 0;
      margin: 32px 0;
      position: relative;
    }

    .auth-flow::before {
      content: '';
      position: absolute;
      left: 19px;
      top: 24px;
      bottom: 24px;
      width: 1px;
      background: linear-gradient(to bottom, var(--amber), var(--blue), var(--green));
      opacity: .4;
    }

    .auth-step {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      padding: 16px 0;
    }

    .auth-circle {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      border: 1px solid var(--border-2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--ui);
      font-weight: 700;
      font-size: 13px;
      flex-shrink: 0;
      position: relative;
      z-index: 1;
      background: var(--bg);
    }

    .ac-amber {
      border-color: var(--amber);
      color: var(--amber);
      box-shadow: 0 0 12px var(--amber-glow);
    }

    .ac-blue {
      border-color: var(--blue);
      color: var(--blue);
      box-shadow: 0 0 12px rgba(56, 189, 248, .3);
    }

    .ac-green {
      border-color: var(--green);
      color: var(--green);
      box-shadow: 0 0 12px rgba(52, 211, 153, .3);
    }

    .auth-body {
      flex: 1;
      padding-top: 6px;
    }

    .auth-title {
      font-family: var(--ui);
      font-weight: 600;
      font-size: 13px;
      letter-spacing: .03em;
      margin-bottom: 5px;
    }

    .auth-detail {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* ═══════════════════════════════════════════════════════════════
   ROLE TABLE BADGES
═══════════════════════════════════════════════════════════════ */
    .role-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 9px;
      border-radius: 3px;
      font-size: 10px;
      font-family: var(--mono);
      letter-spacing: .05em;
      font-weight: 500;
    }

    .role-admin {
      background: rgba(245, 158, 11, .12);
      color: var(--amber);
      border: 1px solid rgba(245, 158, 11, .25);
    }

    .role-operator {
      background: rgba(56, 189, 248, .1);
      color: var(--blue);
      border: 1px solid rgba(56, 189, 248, .25);
    }

    .role-viewer {
      background: rgba(52, 211, 153, .1);
      color: var(--green);
      border: 1px solid rgba(52, 211, 153, .25);
    }

    .role-emergency {
      background: rgba(248, 113, 113, .1);
      color: var(--red);
      border: 1px solid rgba(248, 113, 113, .25);
    }

    .profile-role-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 14px;
    }

    .profile-role-card {
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-left: 3px solid var(--border-2);
      border-radius: 4px;
      background: var(--surface);
    }

    .profile-role-title {
      margin-bottom: 4px;
    }

    .profile-role-desc {
      font-size: 12.5px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    /* ═══════════════════════════════════════════════════════════════
   INFO BOXES
═══════════════════════════════════════════════════════════════ */
    .info-box {
      display: flex;
      gap: 14px;
      padding: 16px 20px;
      border-radius: var(--radius);
      margin: 20px 0;
      font-size: 12.5px;
    }

    .info-box.amber {
      background: var(--amber-dim);
      border: 1px solid rgba(245, 158, 11, .2);
      color: var(--text);
    }

    .info-box.blue {
      background: var(--blue-dim);
      border: 1px solid rgba(56, 189, 248, .2);
      color: var(--text);
    }

    .info-box.green {
      background: var(--green-dim);
      border: 1px solid rgba(52, 211, 153, .2);
      color: var(--text);
    }

    .info-icon {
      flex-shrink: 0;
      font-size: 16px;
      margin-top: 1px;
      color: var(--amber);
    }

    .info-box.blue .info-icon {
      color: var(--blue);
    }

    .info-box.green .info-icon {
      color: var(--green);
    }

    .check-mark {
      font-size: 14px;
    }

    .cam-icon {
      color: var(--amber);
      margin-right: 6px;
      font-size: 13px;
    }

    /* ═══════════════════════════════════════════════════════════════
   SUBSECTIONS
═══════════════════════════════════════════════════════════════ */
    .sub-title {
      font-family: var(--ui);
      font-weight: 600;
      font-size: 16px;
      letter-spacing: .03em;
      margin: 40px 0 14px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sub-title::before {
      content: '';
      width: 3px;
      height: 16px;
      background: var(--amber);
      border-radius: 2px;
      flex-shrink: 0;
    }

    p {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.75;
      margin-bottom: 14px;
    }

    code {
      background: var(--surface-2);
      border: 1px solid var(--border-2);
      border-radius: 3px;
      padding: 1px 6px;
      font-family: var(--mono);
      font-size: 11.5px;
      color: var(--amber);
    }

    /* Two column layout */
    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin: 20px 0;
    }

    /* Stat strip */
    .stat-strip {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin: 32px 0;
    }

    .stat-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
    }

    .stat-val {
      font-family: var(--ui);
      font-weight: 800;
      font-size: 28px;
      color: var(--amber);
      display: block;
      margin-bottom: 4px;
    }

    .stat-lbl {
      font-size: 10px;
      color: var(--text-muted);
      letter-spacing: .08em;
      text-transform: uppercase;
    }

    /* ═══════════════════════════════════════════════════════════════
   FOOTER
═══════════════════════════════════════════════════════════════ */
    .footer {
      margin-left: var(--sidebar-w);
      border-top: 1px solid var(--border);
      padding: 32px 80px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--text-faint);
    }
  </style>
</head>

<body>

  <!-- ╔═══════════════════════════════════╗
     ║           SIDEBAR NAV            ║
     ╚═══════════════════════════════════╝ -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-progress" id="progress-bar"></div>

    <div class="sidebar-brand">
      <span class="brand-name">BRASMAR</span>
      <span class="brand-sub">Manual de Sistema · v1.0</span>
    </div>

    <ul class="nav-list" id="nav-list">
      <li class="nav-item">
        <a class="nav-link active" href="#inicio">
          <span class="nav-num">00</span>
          <span class="nav-dot"></span>
          Início
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#resumo">
          <span class="nav-num">01</span>
          <span class="nav-dot"></span>
          Introdução
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#arquitectura">
          <span class="nav-num">02</span>
          <span class="nav-dot"></span>
          Arquitetura Global
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#portal">
          <span class="nav-num">03</span>
          <span class="nav-dot"></span>
          Brasmar Platform
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#routing">
          <span class="nav-num">04</span>
          <span class="nav-dot"></span>
          Cuvette Routing
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#tunnel">
          <span class="nav-num">05</span>
          <span class="nav-dot"></span>
          Cuvette Tunnel
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#autenticacao">
          <span class="nav-num">06</span>
          <span class="nav-dot"></span>
          Autenticação
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#manutencao">
          <span class="nav-num">07</span>
          <span class="nav-dot"></span>
          Manutenção
        </a>
      </li>
    </ul>

    <div class="sidebar-footer">
      <span>© 2026 Brasmar</span>
      <span style="margin-top:4px;">Desenvolvimento: Termoave LDA</span>
    </div>
  </nav>

  <!-- ╔═══════════════════════════════════╗
     ║              MAIN                ║
     ╚═══════════════════════════════════╝ -->
  <main class="main">

    <!-- ── 00 · HERO ───────────────────────────────────────────── -->
    <section class="hero" id="inicio">
      <div class="hero-grid"></div>
      <div class="hero-content">
        <p class="hero-eyebrow">Sistema Industrial · Documentação Técnica</p>
        <h1 class="hero-title">BRASMAR<br><span>PLATFORM</span></h1>
        <p class="hero-subtitle">Manual de Sistema Integrado</p>
        <div class="hero-divider"></div>

        <div class="hero-modules">
          <div class="module-tag">
            <span class="tag-dot dot-amber"></span>
            Portal Central
          </div>
          <div class="module-tag">
            <span class="tag-dot dot-blue"></span>
            Cuvette Routing
          </div>
          <div class="module-tag">
            <span class="tag-dot dot-green"></span>
            Cuvette Tunnel
          </div>
        </div>

        <div class="hero-meta">
          <span>Versão 1.0</span>
          <span>·</span>
          <span>2026</span>
          <span>·</span>
          <span>Desenvolvido por Termoave LDA</span>
        </div>
      </div>
      <div class="scroll-hint">scroll</div>
    </section>

    <!-- ── 01 · INTRODUÇÃO ────────────────────────────────────── -->
    <section class="section" id="resumo">
      <div class="section-num">01</div>
      <p class="section-eyebrow">01 — Introdução</p>
      <h2 class="section-title">Introdução</h2>
      <p class="section-lead">Sistema industrial integrado de monitorização e encaminhamento automático de cuvetes, que
        combina visão computacional, pesagem automatizada e controlo de equipamentos físicos numa única plataforma.</p>

      <p>A <strong>Plataforma Brasmar</strong> foi desenvolvida para apoiar as operações de linhas de produção com
        transporte de cuvetes por tapete rolante. O sistema monitoriza continuamente o fluxo de cuvetes, identifica cada
        produto com recurso a visão computacional e toma decisões de encaminhamento automático com base no peso e na
        base de dados de produtos — sem necessidade de intervenção humana.</p>

      <p>A plataforma unifica a gestão de utilizadores, a monitorização em tempo real, o controlo dos equipamentos de
        encaminhamento e o registo de ocorrências numa única solução segura e integrada, acessível por qualquer browser
        da rede interna.</p>

      <p>A conceção, desenvolvimento e manutenção técnica desta solução são assegurados pela
        <strong>Termoave LDA</strong>, em articulação com a operação da Brasmar.</p>

      <h3 class="sub-title">Objetivos do Sistema</h3>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px; margin:20px 0 40px;">
        <div
          style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--amber); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:8px; color:var(--text);">
            Encaminhamento automático</div>
          <div style="font-size:12px; color:var(--text-muted); line-height:1.7;">Determinar o destino de cada cuvete com
            base no seu peso e no produto correspondente, acionando os equipamentos físicos de encaminhamento sem
            intervenção humana.</div>
        </div>
        <div
          style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--amber); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:8px; color:var(--text);">
            Monitorização em tempo real</div>
          <div style="font-size:12px; color:var(--text-muted); line-height:1.7;">Disponibilizar imagem em direto de
            todas as câmaras e detetar automaticamente anomalias — cuvetes paradas, acumulação excessiva ou
            congestionamentos no túnel de saída.</div>
        </div>
        <div
          style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--amber); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:8px; color:var(--text);">
            Gestão centralizada de acesso</div>
          <div style="font-size:12px; color:var(--text-muted); line-height:1.7;">Garantir que todos os módulos partilham
            um único sistema de autenticação, com perfis de utilizador distintos e auditáveis para operadores,
            supervisores e administradores.</div>
        </div>
        <div
          style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--amber); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:8px; color:var(--text);">
            Registo e auditoria</div>
          <div style="font-size:12px; color:var(--text-muted); line-height:1.7;">Manter um histórico detalhado de todas
            as operações de encaminhamento, eventos de alarme e sessões de processamento para análise e auditoria
            posteriores.</div>
        </div>
      </div>

      <h3 class="sub-title">Módulos da Plataforma</h3>
      <div class="module-cards">
        <div class="module-card card-portal">
          <span class="card-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><rect x="5" y="11" width="14" height="10" rx="2"></rect><path d="M8 11V8a4 4 0 0 1 8 0v3"></path><circle cx="12" cy="16" r="1.2"></circle></svg></span></span>
          <div class="card-title">Portal Central</div>
          <div class="card-port">https://10.7.3.1/</div>
          <div class="card-desc">Ponto de entrada único da plataforma. Gere a autenticação, as sessões de utilizador e o
            acesso a todos os módulos. Inclui painel de administração para gestão de contas e perfis de acesso.</div>
        </div>
        <div class="module-card card-routing">
          <span class="card-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 3 4 7l8 4 8-4-8-4Z"></path><path d="M4 7v10l8 4 8-4V7"></path><path d="M12 11v10"></path></svg></span></span>
          <div class="card-title">Cuvette Routing</div>
          <div class="card-port">https://10.7.3.1/routing/</div>
          <div class="card-desc">Sistema de deteção, rastreamento e encaminhamento automático de cuvetes. Monitoriza a
            linha de produção em tempo real, lê pesos da balança e aciona os flaps físicos com base no produto detetado.
          </div>
        </div>
        <div class="module-card card-tunnel">
          <span class="card-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><rect x="8" y="3" width="8" height="15" rx="3"></rect><circle cx="12" cy="7" r="1"></circle><circle cx="12" cy="10.5" r="1"></circle><circle cx="12" cy="14" r="1"></circle><path d="M12 18v3"></path></svg></span></span>
          <div class="card-title">Cuvette Tunnel</div>
          <div class="card-port">https://10.7.3.1/tunnel/</div>
          <div class="card-desc">Sistema de monitorização do túnel de saída. Deteta cuvetes paradas, contagem acima do
            limite e situações de congestionamento, gerando alarmes em tempo real visíveis na interface.</div>
        </div>
      </div>
    </section>

    <!-- ── 02 · ARQUITETURA ────────────────────────────────────── -->
    <section class="section" id="arquitectura">
      <div class="section-num">02</div>
      <p class="section-eyebrow">02 — Arquitetura Global</p>
      <h2 class="section-title">Arquitetura Global</h2>
      <p class="section-lead">Três módulos integrados, um único ponto de entrada seguro. Toda a comunicação com o
        exterior passa pelo servidor de acesso, que valida a identidade do utilizador antes de encaminhar cada pedido.
      </p>

      <p>A Plataforma Brasmar está organizada de modo a que nenhum módulo esteja diretamente exposto à rede sem
        validação prévia. O servidor de acesso centraliza a autenticação e encaminha os pedidos para o Portal Central,
        para o Cuvette Routing ou para o Cuvette Tunnel conforme a rota solicitada. Internamente, os serviços comunicam
        entre si de forma segura e isolada.</p>

      <!-- Architecture SVG Diagram -->
      <div class="arch-diagram">
        <svg class="arch-svg" viewBox="0 0 860 340" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <filter id="glow-amber">
              <feGaussianBlur stdDeviation="3" result="blur" />
              <feMerge>
                <feMergeNode in="blur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
            <filter id="glow-blue">
              <feGaussianBlur stdDeviation="2.5" result="blur" />
              <feMerge>
                <feMergeNode in="blur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>

            <!-- Paths for animateMotion -->
            <path id="p-nginx-kc" d="M 245 100 Q 390 100 480 85" />
            <path id="p-nginx-portal" d="M 245 160 Q 390 160 480 160" />
            <path id="p-nginx-route" d="M 245 220 Q 390 220 480 235" />
            <path id="p-nginx-tunnel" d="M 245 280 Q 390 280 480 310" />
            <path id="p-kc-pg" d="M 680 85  Q 740 85  740 130" />
          </defs>

          <!-- User -->
          <rect x="10" y="140" width="100" height="40" rx="6" fill="#080E18" stroke="#1E2F4A" stroke-width="1" />
          <text x="60" y="155" text-anchor="middle" font-family="'Syne',sans-serif" font-size="10" font-weight="700"
            fill="#64748B">UTILIZADOR</text>
          <text x="60" y="169" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="9"
            fill="#2D4460">HTTPS</text>

          <!-- Arrow user → nginx -->
          <line x1="110" y1="160" x2="145" y2="160" stroke="#F59E0B" stroke-width="1.5" stroke-dasharray="4 3"
            opacity=".6" />
          <polygon points="145,156 153,160 145,164" fill="#F59E0B" opacity=".6" />

          <!-- Nginx -->
          <rect x="155" y="130" width="90" height="60" rx="6" fill="#080E18" stroke="#F59E0B" stroke-width="1.5"
            filter="url(#glow-amber)" />
          <text x="200" y="151" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="800"
            fill="#F59E0B">Servidor</text>
          <text x="200" y="165" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="800"
            fill="#F59E0B">de Acesso</text>
          <text x="200" y="179" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">10.7.3.1 · HTTPS</text>

          <!-- Connection lines (animated dashes) -->
          <!-- Nginx → Keycloak -->
          <path d="M 245 155 Q 370 120 480 90" fill="none" stroke="#38BDF8" stroke-width="1" stroke-dasharray="6 4"
            opacity=".4">
            <animate attributeName="stroke-dashoffset" from="0" to="-40" dur="2s" repeatCount="indefinite" />
          </path>
          <!-- Nginx → Portal -->
          <path d="M 245 160 L 480 160" fill="none" stroke="#F59E0B" stroke-width="1" stroke-dasharray="6 4"
            opacity=".4">
            <animate attributeName="stroke-dashoffset" from="0" to="-40" dur="2.5s" repeatCount="indefinite" />
          </path>
          <!-- Nginx → Routing -->
          <path d="M 245 165 Q 370 200 480 230" fill="none" stroke="#818CF8" stroke-width="1" stroke-dasharray="6 4"
            opacity=".4">
            <animate attributeName="stroke-dashoffset" from="0" to="-40" dur="3s" repeatCount="indefinite" />
          </path>
          <!-- Nginx → Tunnel -->
          <path d="M 245 168 Q 370 240 480 300" fill="none" stroke="#34D399" stroke-width="1" stroke-dasharray="6 4"
            opacity=".4">
            <animate attributeName="stroke-dashoffset" from="0" to="-40" dur="3.5s" repeatCount="indefinite" />
          </path>

          <!-- Keycloak -->
          <rect x="480" y="60" width="140" height="55" rx="6" fill="#080E18" stroke="#38BDF8" stroke-width="1.2"
            filter="url(#glow-blue)" />
          <text x="550" y="83" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="700"
            fill="#38BDF8">Gestão de</text>
          <text x="550" y="97" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="700"
            fill="#38BDF8">Identidade</text>
          <text x="550" y="110" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">Autenticação centralizada</text>

          <!-- Portal Central -->
          <rect x="480" y="135" width="140" height="55" rx="6" fill="#080E18" stroke="#F59E0B" stroke-width="1.2" />
          <text x="550" y="158" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="700"
            fill="#F59E0B">Portal Central</text>
          <text x="550" y="172" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">Acesso · Sessões</text>
          <text x="550" y="183" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">Gestão de utilizadores</text>

          <!-- Cuvette Routing -->
          <rect x="480" y="210" width="140" height="55" rx="6" fill="#080E18" stroke="#818CF8" stroke-width="1.2" />
          <text x="550" y="233" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="700"
            fill="#818CF8">Cuvette Routing</text>
          <text x="550" y="247" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">Deteção · Encaminhamento</text>
          <text x="550" y="258" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">Linha de produção</text>

          <!-- Cuvette Tunnel -->
          <rect x="480" y="285" width="140" height="45" rx="6" fill="#080E18" stroke="#34D399" stroke-width="1.2" />
          <text x="550" y="305" text-anchor="middle" font-family="'Syne',sans-serif" font-size="11" font-weight="700"
            fill="#34D399">Cuvette Tunnel</text>
          <text x="550" y="319" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#5A7393">Monitorização · Alarmes</text>

          <!-- PostgreSQL -->
          <rect x="660" y="60" width="120" height="55" rx="6" fill="#080E18" stroke="#64748B" stroke-width="1" />
          <text x="720" y="83" text-anchor="middle" font-family="'Syne',sans-serif" font-size="10" font-weight="700"
            fill="#64748B">Base de Dados</text>
          <text x="720" y="97" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#374E6A">Identidade</text>
          <text x="720" y="108" text-anchor="middle" font-family="'IBM Plex Mono',monospace" font-size="8"
            fill="#374E6A">&amp; Sessões</text>

          <!-- Keycloak → PG -->
          <line x1="620" y1="87" x2="660" y2="87" stroke="#64748B" stroke-width="1" stroke-dasharray="4 3" opacity=".5">
            <animate attributeName="stroke-dashoffset" from="0" to="-20" dur="2s" repeatCount="indefinite" />
          </line>

          <!-- Animated flow dots -->
          <!-- To Keycloak -->
          <circle r="4" fill="#38BDF8" opacity=".9">
            <animateMotion dur="2s" repeatCount="indefinite" path="M 245 155 Q 370 120 480 87" />
          </circle>
          <!-- To Portal -->
          <circle r="4" fill="#F59E0B" opacity=".9">
            <animateMotion dur="2.5s" repeatCount="indefinite" path="M 245 160 L 480 162" />
          </circle>
          <!-- To Routing -->
          <circle r="4" fill="#818CF8" opacity=".9">
            <animateMotion dur="3s" repeatCount="indefinite" path="M 245 165 Q 370 200 480 237" />
          </circle>
          <!-- To Tunnel -->
          <circle r="4" fill="#34D399" opacity=".9">
            <animateMotion dur="3.5s" repeatCount="indefinite" path="M 245 168 Q 370 240 480 307" />
          </circle>

          <!-- Labels on connections -->
          <text x="340" y="112" font-family="'IBM Plex Mono',monospace" font-size="8" fill="#38BDF8"
            opacity=".6">/auth/</text>
          <text x="340" y="154" font-family="'IBM Plex Mono',monospace" font-size="8" fill="#F59E0B"
            opacity=".6">/</text>
          <text x="340" y="202" font-family="'IBM Plex Mono',monospace" font-size="8" fill="#818CF8"
            opacity=".6">/routing/</text>
          <text x="340" y="258" font-family="'IBM Plex Mono',monospace" font-size="8" fill="#34D399"
            opacity=".6">/tunnel/</text>
        </svg>
      </div>

      <h3 class="sub-title">Rotas de Acesso</h3>
      <p>Todos os módulos são acedidos pelo mesmo endereço base (<code>https://10.7.3.1</code>). O servidor de acesso
        encaminha automaticamente cada pedido para o módulo correto com base na rota indicada no browser.</p>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Módulo</th>
              <th>Endereço de Acesso</th>
              <th>Função</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Portal Central</strong></td>
              <td class="td-mono">https://10.7.3.1/</td>
              <td class="td-muted">Portal de entrada, autenticação e gestão de utilizadores e perfis de acesso.</td>
            </tr>
            <tr>
              <td><strong>Cuvette Routing</strong></td>
              <td class="td-mono">https://10.7.3.1/routing/</td>
              <td class="td-muted">Interface de monitorização da linha de produção, controlo do encaminhamento e
                histórico de operações.</td>
            </tr>
            <tr>
              <td><strong>Cuvette Tunnel</strong></td>
              <td class="td-mono">https://10.7.3.1/tunnel/</td>
              <td class="td-muted">Interface de monitorização do túnel de saída e gestão de alarmes em tempo real.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="info-box blue" style="margin-top:0;">
        <span class="info-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"></circle><path d="M12 10v6"></path><path d="M12 7.2h.01"></path></svg></span></span>
        <span>Não é necessário memorizar endereços ou portos específicos de cada módulo. Basta aceder a
          <code>https://10.7.3.1/</code> — o sistema trata do encaminhamento de forma transparente após a
          autenticação.</span>
      </div>

      <h3 class="sub-title">Fluxo Geral de Dados</h3>
      <p>O percurso típico de um pedido e de uma cuvete na plataforma segue as seguintes etapas:</p>

      <div style="display:flex; flex-direction:column; gap:0; margin:24px 0;">
        <div class="auth-step">
          <div class="auth-circle ac-amber">1</div>
          <div class="auth-body">
            <div class="auth-title">Autenticação do utilizador</div>
            <div class="auth-detail">O utilizador acede ao Portal Central e autentica-se. É criada uma sessão segura
              associada ao perfil de acesso.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-amber">2</div>
          <div class="auth-body">
            <div class="auth-title">Validação de cada pedido</div>
            <div class="auth-detail">Em cada pedido subsequente, o servidor de acesso verifica automaticamente a
              validade da sessão. Pedidos não autenticados são rejeitados antes de chegar a qualquer módulo.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-blue">3</div>
          <div class="auth-body">
            <div class="auth-title">Captura de imagem contínua</div>
            <div class="auth-detail">As câmaras transmitem imagem em tempo real para o Cuvette Routing e para o Cuvette
              Tunnel, que processam os fotogramas de forma independente e contínua.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-blue">4</div>
          <div class="auth-body">
            <div class="auth-title">Deteção, pesagem e correspondência</div>
            <div class="auth-detail">O Cuvette Routing identifica cada cuvete, acompanha o seu percurso e, quando passa
              pela balança, lê o peso e determina o produto correspondente na base de dados.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-green">5</div>
          <div class="auth-body">
            <div class="auth-title">Encaminhamento automático</div>
            <div class="auth-detail">Com base no produto identificado, o sistema aciona o flap físico correto,
              direcionando a cuvete para a saída adequada sem intervenção humana.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-green">6</div>
          <div class="auth-body">
            <div class="auth-title">Monitorização e alertas</div>
            <div class="auth-detail">O Cuvette Tunnel monitoriza em contínuo o túnel de saída. Qualquer anomalia —
              cuvete parada, acumulação excessiva ou cuvetes sobrepostas — gera um alarme imediato na interface.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ── 03 · BRASMAR PLATFORM ──────────────────────────────── -->
    <section class="section" id="portal">
      <div class="section-num">03</div>
      <p class="section-eyebrow">03 — Módulo</p>
      <h2 class="section-title">Brasmar Platform</h2>
      <p class="section-lead">Núcleo de segurança e gestão de identidade da plataforma. Responsável pela autenticação, pela gestão de utilizadores e por garantir que apenas acessos autorizados chegam a cada módulo.</p>

      <p>Este módulo é composto por três componentes que trabalham em conjunto de forma transparente: o <strong>serviço de autenticação</strong>, que gere identidades e sessões; o <strong>portal de aplicações</strong>, que serve de página de entrada após o login; e o <strong>servidor de acesso</strong>, que valida cada pedido antes de o encaminhar para o destino correto.</p>

      <h3 class="sub-title">Acesso ao Sistema</h3>
      <p>O acesso à plataforma é feito exclusivamente através de um browser, introduzindo o endereço <code>https://10.7.3.1/</code>. Não é necessária nenhuma aplicação adicional. O processo é o seguinte:</p>

      <div class="auth-flow" style="margin:20px 0 32px;">
        <div class="auth-step">
          <div class="auth-circle ac-amber">1</div>
          <div class="auth-body">
            <div class="auth-title">Aceder ao endereço da plataforma</div>
            <div class="auth-detail">Abrir o browser e introduzir <code>https://10.7.3.1/</code>. O sistema deteta automaticamente a ausência de sessão e redireciona para a página de autenticação.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-amber">2</div>
          <div class="auth-body">
            <div class="auth-title">Introduzir credenciais</div>
            <div class="auth-detail">Inserir o nome de utilizador e a palavra-passe na página de login. As credenciais são verificadas de forma segura pelo serviço de autenticação.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-green">3</div>
          <div class="auth-body">
            <div class="auth-title">Acesso ao portal de aplicações</div>
            <div class="auth-detail">Após autenticação bem-sucedida, o utilizador é redirecionado para o portal, onde estão listadas as aplicações disponíveis conforme o seu perfil. A sessão mantém-se ativa durante <strong>8 horas</strong>.</div>
          </div>
        </div>
      </div>

      <div class="info-box amber">
        <span class="info-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 3 2.8 19h18.4L12 3Z"></path><path d="M12 9v5"></path><path d="M12 17.2h.01"></path></svg></span></span>
        <span>As credenciais de acesso são pessoais e intransmissíveis. Em equipamentos partilhados, utilize sempre a opção <strong>Sair</strong> no final de cada sessão para invalidar o acesso imediatamente.</span>
      </div>

      <h3 class="sub-title">Portal de Aplicações</h3>
      <p>Após a autenticação, o utilizador acede ao portal central, que lista todas as aplicações disponíveis. Para cada módulo, o portal indica o nome, a descrição e o estado de disponibilidade do serviço. O utilizador acede a uma aplicação clicando no respetivo cartão.</p>

      <div class="two-col" style="margin:20px 0;">
        <div style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--amber); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:8px; color:var(--text);">Aplicações visíveis</div>
          <div style="font-size:12px; color:var(--text-muted); line-height:1.7;">Cada utilizador vê apenas as aplicações às quais o seu perfil tem permissão de acesso. A lista é atualizada automaticamente após qualquer alteração de perfil.</div>
        </div>
        <div style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--green); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:8px; color:var(--text);">Estado dos serviços</div>
          <div style="font-size:12px; color:var(--text-muted); line-height:1.7;">O portal verifica automaticamente a disponibilidade de cada módulo. Se um serviço estiver temporariamente indisponível, o cartão é apresentado como inativo com indicação do estado.</div>
        </div>
      </div>

      <h3 class="sub-title">Perfis de Acesso</h3>
      <p>A plataforma define quatro perfis de acesso com permissões distintas em cada módulo. Um utilizador pode ter mais do que um perfil em simultâneo; nesse caso, prevalece o conjunto de permissões mais alargado.</p>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Perfil</th>
              <th>Cuvette Routing</th>
              <th>Cuvette Tunnel</th>
              <th>Administração</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="role-badge role-admin">admin</span></td>
              <td class="td-muted">Acesso total: configuração, arranque/paragem do processamento, calibração, exportação de dados.</td>
              <td class="td-muted">Acesso total: configuração de limiares, zonas de deteção e gestão de alarmes.</td>
              <td class="td-muted">Painel de administração — criação e gestão de utilizadores e perfis.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-operator">operator</span></td>
              <td class="td-muted">Arranque/paragem do processamento, configuração de câmaras e linhas virtuais, visualização e histórico.</td>
              <td class="td-muted">Monitorização em direto, gestão de alarmes e configuração de limiares operacionais.</td>
              <td class="td-muted">Sem acesso ao painel de administração.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-viewer">viewer</span></td>
              <td class="td-muted">Visualização do streaming em direto, painel de monitorização e histórico (apenas leitura).</td>
              <td class="td-muted">Visualização do streaming e consulta de alarmes ativos (apenas leitura).</td>
              <td class="td-muted">Sem acesso ao painel de administração.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-emergency">emergency</span></td>
              <td class="td-muted">Acesso de emergência limitado e auditável ao estado atual da linha.</td>
              <td class="td-muted">Visualização do estado atual do túnel.</td>
              <td class="td-muted">Sem acesso ao painel de administração.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3 class="sub-title">Gestão de Utilizadores</h3>
      <p>A gestão de contas é exclusiva do perfil <strong>admin</strong>, acessível através do painel de administração no menu do portal. O administrador pode criar novas contas, atribuir ou revogar perfis, desativar contas sem as eliminar e forçar a redefinição de palavra-passe.</p>

      <div class="info-box green">
        <span class="info-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"></circle><path d="m8 12.3 2.6 2.6L16 9.5"></path></svg></span></span>
        <span>Boa prática: criar uma conta individual para cada utilizador, atribuir sempre o perfil mínimo necessário para a função exercida, e desativar imediatamente contas de utilizadores que deixem de precisar de acesso.</span>
      </div>
    </section>

    <!-- ── 04 · CUVETTE ROUTING ───────────────────────────────── -->
    <section class="section" id="routing">
      <div class="section-num">04</div>
      <p class="section-eyebrow">04 — Módulo</p>
      <h2 class="section-title">Cuvette Routing</h2>
      <p class="section-lead">Sistema de deteção, rastreamento e encaminhamento automático de cuvetes na linha de produção. Monitoriza as câmaras em tempo real, lê pesos da balança e aciona os flaps físicos com base no produto identificado.</p>

      <!-- Permissões -->
      <h3 class="sub-title">Permissões por Perfil</h3>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Perfil</th><th>Ações disponíveis</th></tr></thead>
          <tbody>
            <tr>
              <td><span class="role-badge role-admin">admin</span></td>
              <td class="td-muted">Acesso total: configuração de câmaras e linhas virtuais, arranque/paragem do processamento, calibração, atualização do catálogo PMS, exportação de histórico e todas as definições do sistema.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-operator">operator</span></td>
              <td class="td-muted">Arranque/paragem do processamento, configuração de linhas virtuais e câmaras, visualização de streams em direto, painel PMS e histórico de execuções.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-viewer">viewer</span></td>
              <td class="td-muted">Visualização de streams em direto, painel PMS em tempo real e histórico de execuções (apenas leitura).</td>
            </tr>
            <tr>
              <td><span class="role-badge role-emergency">emergency</span></td>
              <td class="td-muted">Visualização do estado atual da linha e streams em direto.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Câmaras -->
      <h3 class="sub-title">Câmaras da Linha de Produção</h3>
      <p>O sistema dispõe de 8 câmaras configuradas. As câmaras ativas processam na seguinte ordem: <strong>camera05 → camera04 → camera06 → camera08 → camera02</strong>. Esta sequência corresponde ao percurso físico das cuvetes na linha.</p>

      <div class="camera-grid">
        <div class="camera-card disabled">
          <div class="cam-id">camera01</div>
          <div class="cam-location">Saída Túnel</div>
          <div class="cam-ip">10.7.2.250</div>
          <div class="cam-status status-off"><span class="status-led led-off"></span> Desativada</div>
        </div>
        <div class="camera-card enabled">
          <div class="cam-id">camera02</div>
          <div class="cam-location">Flap 4</div>
          <div class="cam-ip">10.7.2.251</div>
          <div class="cam-status status-on"><span class="status-led led-on"></span> Ativa</div>
          <div class="cam-caps"><span class="cap-badge">5.ª na seq.</span><span class="cap-badge">LC4</span></div>
        </div>
        <div class="camera-card disabled">
          <div class="cam-id">camera03</div>
          <div class="cam-location">Testes</div>
          <div class="cam-ip">10.7.2.252</div>
          <div class="cam-status status-off"><span class="status-led led-off"></span> Desativada</div>
        </div>
        <div class="camera-card enabled">
          <div class="cam-id">camera04</div>
          <div class="cam-location">Pós-Balança</div>
          <div class="cam-ip">10.7.2.253</div>
          <div class="cam-status status-on"><span class="status-led led-on"></span> Ativa</div>
          <div class="cam-caps"><span class="cap-badge">2.ª na seq.</span></div>
        </div>
        <div class="camera-card enabled" style="border-top-color: var(--amber);">
          <div class="cam-id">camera05</div>
          <div class="cam-location" style="color:var(--amber);"><span class="icon-svg cam-icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M4 7h16"></path><path d="M12 7v11"></path><path d="M8 18h8"></path><path d="M7 7 4 12h6L7 7Z"></path><path d="M17 7l-3 5h6l-3-5Z"></path></svg></span>Balança</div>
          <div class="cam-ip">10.7.2.254</div>
          <div class="cam-status status-on"><span class="status-led led-on"></span> Ativa</div>
          <div class="cam-caps">
            <span class="cap-badge" style="border-color:var(--amber);color:var(--amber);">LP — pesagem</span>
            <span class="cap-badge">1.ª na seq.</span>
          </div>
        </div>
        <div class="camera-card enabled">
          <div class="cam-id">camera06</div>
          <div class="cam-location">Flap 1 &amp; 2</div>
          <div class="cam-ip">10.7.2.255</div>
          <div class="cam-status status-on"><span class="status-led led-on"></span> Ativa</div>
          <div class="cam-caps"><span class="cap-badge">3.ª na seq.</span><span class="cap-badge">LC1 · LC2</span></div>
        </div>
        <div class="camera-card disabled">
          <div class="cam-id">camera07</div>
          <div class="cam-location">Zoom-out Flaps</div>
          <div class="cam-ip">10.7.3.5</div>
          <div class="cam-status status-off"><span class="status-led led-off"></span> Desativada</div>
        </div>
        <div class="camera-card enabled">
          <div class="cam-id">camera08</div>
          <div class="cam-location">Flap 3</div>
          <div class="cam-ip">10.7.3.4</div>
          <div class="cam-status status-on"><span class="status-led led-on"></span> Ativa</div>
          <div class="cam-caps"><span class="cap-badge">4.ª na seq.</span><span class="cap-badge">LC3</span></div>
        </div>
      </div>

      <!-- Iniciar processamento -->
      <h3 class="sub-title">Iniciar e Parar o Processamento</h3>
      <p>O arranque e paragem do processamento estão disponíveis para os perfis <strong>operator</strong> e <strong>admin</strong>. O streaming de vídeo mantém-se sempre ativo, independentemente do estado do processamento.</p>

      <div class="two-col" style="margin:20px 0 16px;">
        <div style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--green); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:10px; color:var(--green);">▶ Iniciar Processamento</div>
          <ol style="font-size:12px; color:var(--text-muted); line-height:1.8; padding-left:16px;">
            <li>Na interface principal, clicar em <strong>Iniciar Processamento</strong></li>
            <li>Confirmar a ação quando solicitado</li>
            <li>O indicador passa a <strong>Ativo</strong> — o sistema começa a detetar e encaminhar cuvetes</li>
          </ol>
        </div>
        <div style="padding:20px 22px; background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--red); border-radius:var(--radius);">
          <div style="font-family:var(--ui); font-weight:600; font-size:13px; margin-bottom:10px; color:var(--red);">■ Parar Processamento</div>
          <ol style="font-size:12px; color:var(--text-muted); line-height:1.8; padding-left:16px;">
            <li>Clicar em <strong>Parar Processamento</strong></li>
            <li>O sistema finaliza a sessão e regista os totais no histórico</li>
            <li>O indicador volta a <strong>Inativo</strong> — o streaming continua</li>
          </ol>
        </div>
      </div>

      <div class="info-box amber">
        <span class="info-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 3 2.8 19h18.4L12 3Z"></path><path d="M12 9v5"></path><path d="M12 17.2h.01"></path></svg></span></span>
        <span>Parar o processamento interrompe imediatamente todas as decisões de encaminhamento automático. Certifique-se de que não existem cuvetes em trânsito nos flaps antes de efetuar esta operação.</span>
      </div>

      <!-- Linhas Virtuais -->
      <h3 class="sub-title">Configuração de Linhas Virtuais</h3>
      <p>As linhas virtuais são marcações desenhadas sobre o frame de vídeo de cada câmara. Quando uma cuvete cruza uma linha, o sistema executa a ação associada — registar peso, transferir rastreamento ou acionar um flap. A configuração está disponível para <strong>operator</strong> e <strong>admin</strong>.</p>

      <div class="info-box amber" style="margin-bottom:20px;">
        <span class="info-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 3 2.8 19h18.4L12 3Z"></path><path d="M12 9v5"></path><path d="M12 17.2h.01"></path></svg></span></span>
        <span>O campo <strong>ID da linha</strong> deve ser preenchido <em>exatamente</em> como indicado na tabela abaixo. O sistema usa este ID para associar linhas a flaps e transferir rastreamento entre câmaras. Um ID incorreto impede o funcionamento do encaminhamento automático.</span>
      </div>

      <!-- Line types table -->
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Tipo</th><th>Cor</th><th>ID obrigatório</th><th>Função</th></tr>
          </thead>
          <tbody>
            <tr>
              <td class="td-mono">weight</td>
              <td><span style="display:inline-block;width:14px;height:14px;background:#FF0000;border-radius:3px;vertical-align:middle;margin-right:6px;box-shadow:0 0 5px rgba(255,0,0,.5);"></span>Vermelho</td>
              <td class="td-mono" style="color:var(--amber);">LP</td>
              <td class="td-muted">Leitura de peso via balança. Ao cruzar esta linha, o sistema regista o peso e procura a correspondência no catálogo PMS. Deve existir uma única, em camera05, com o ID exato <strong>LP</strong>.</td>
            </tr>
            <tr>
              <td class="td-mono">command</td>
              <td><span style="display:inline-block;width:14px;height:14px;background:#FFFF00;border-radius:3px;vertical-align:middle;margin-right:6px;box-shadow:0 0 5px rgba(255,255,0,.5);"></span>Amarelo</td>
              <td class="td-mono" style="color:var(--amber);">LC1 · LC2 · LC3 · LC4</td>
              <td class="td-muted">Aciona o flap físico associado. O ID deve ser <strong>LC</strong> seguido do número do flap (1 a 4). Cada flap tem exatamente uma linha de comando.</td>
            </tr>
            <tr>
              <td class="td-mono">confirmation_a</td>
              <td><span style="display:inline-block;width:14px;height:14px;background:#00FF00;border-radius:3px;vertical-align:middle;margin-right:6px;box-shadow:0 0 5px rgba(0,255,0,.4);"></span>Verde</td>
              <td class="td-mono" style="color:var(--amber);">LCF<em>n</em>A</td>
              <td class="td-muted">Confirma que a cuvete seguiu a saída direta do flap. ID: <strong>LCF</strong> + número do flap + <strong>A</strong>. Exemplos: <code>LCF1A</code>, <code>LCF2A</code>.</td>
            </tr>
            <tr>
              <td class="td-mono">confirmation_b</td>
              <td><span style="display:inline-block;width:14px;height:14px;background:#00FF7F;border-radius:3px;vertical-align:middle;margin-right:6px;box-shadow:0 0 5px rgba(0,255,127,.4);"></span>Verde-azul</td>
              <td class="td-mono" style="color:var(--amber);">LCF<em>n</em>B</td>
              <td class="td-muted">Confirma que a cuvete foi desviada pelo flap para a saída alternativa. ID: <strong>LCF</strong> + número do flap + <strong>B</strong>. Exemplos: <code>LCF1B</code>, <code>LCF2B</code>.</td>
            </tr>
            <tr>
              <td class="td-mono">transfer_exit</td>
              <td><span style="display:inline-block;width:14px;height:14px;background:#00FFFF;border-radius:3px;vertical-align:middle;margin-right:6px;box-shadow:0 0 5px rgba(0,255,255,.4);"></span>Ciano</td>
              <td class="td-mono" style="color:var(--amber); font-size:10px;">{origem}_exit_to_{destino}</td>
              <td class="td-muted">Marca a saída da cuvete do campo de visão. ID no formato <strong>{câmara_origem}_exit_to_{câmara_destino}</strong>. Ex.: <code>camera05_exit_to_camera04</code>.</td>
            </tr>
            <tr>
              <td class="td-mono">transfer_entry</td>
              <td><span style="display:inline-block;width:14px;height:14px;background:#00FFFF;border-radius:3px;vertical-align:middle;margin-right:6px;box-shadow:0 0 5px rgba(0,255,255,.4);"></span>Ciano</td>
              <td class="td-mono" style="color:var(--amber); font-size:10px;">{destino}_entry_from_{origem}</td>
              <td class="td-muted">Confirma a entrada da cuvete no campo de visão. ID no formato <strong>{câmara_destino}_entry_from_{câmara_origem}</strong>. Ex.: <code>camera06_entry_from_camera04</code>.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Lines per camera -->
      <h3 class="sub-title">Linhas Configuradas por Câmara</h3>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Câmara</th><th>ID da linha</th><th>Tipo</th><th>Descrição</th></tr></thead>
          <tbody>
            <tr><td rowspan="2"><strong>camera05</strong><br><span style="font-size:10px;color:var(--text-muted);">Balança</span></td><td class="td-mono">LP</td><td class="td-mono" style="font-size:11px;">weight</td><td class="td-muted">Leitura de peso — aciona correspondência PMS</td></tr>
            <tr><td class="td-mono" style="font-size:11px;">camera05_exit_to_camera04</td><td class="td-mono" style="font-size:11px;">transfer_exit</td><td class="td-muted">Saída para camera04</td></tr>
            <tr><td colspan="4" style="padding:4px;background:var(--bg);"></td></tr>
            <tr><td rowspan="2"><strong>camera04</strong><br><span style="font-size:10px;color:var(--text-muted);">Pós-Balança</span></td><td class="td-mono" style="font-size:11px;">camera04_entry_from_camera05</td><td class="td-mono" style="font-size:11px;">transfer_entry</td><td class="td-muted">Entrada vinda de camera05</td></tr>
            <tr><td class="td-mono" style="font-size:11px;">camera04_exit_to_camera06</td><td class="td-mono" style="font-size:11px;">transfer_exit</td><td class="td-muted">Saída para camera06</td></tr>
            <tr><td colspan="4" style="padding:4px;background:var(--bg);"></td></tr>
            <tr><td rowspan="7"><strong>camera06</strong><br><span style="font-size:10px;color:var(--text-muted);">Flap 1 &amp; 2</span></td><td class="td-mono" style="font-size:11px;">camera06_entry_from_camera04</td><td class="td-mono" style="font-size:11px;">transfer_entry</td><td class="td-muted">Entrada vinda de camera04</td></tr>
            <tr><td class="td-mono">LC1</td><td class="td-mono" style="font-size:11px;">command</td><td class="td-muted">Comando — Flap 1</td></tr>
            <tr><td class="td-mono">LCF1A</td><td class="td-mono" style="font-size:11px;">confirmation_a</td><td class="td-muted">Confirmação rota direta — Flap 1</td></tr>
            <tr><td class="td-mono">LCF1B</td><td class="td-mono" style="font-size:11px;">confirmation_b</td><td class="td-muted">Confirmação desvio — Flap 1</td></tr>
            <tr><td class="td-mono">LC2</td><td class="td-mono" style="font-size:11px;">command</td><td class="td-muted">Comando — Flap 2</td></tr>
            <tr><td class="td-mono">LCF2A</td><td class="td-mono" style="font-size:11px;">confirmation_a</td><td class="td-muted">Confirmação rota direta — Flap 2</td></tr>
            <tr><td class="td-mono">LCF2B</td><td class="td-mono" style="font-size:11px;">confirmation_b</td><td class="td-muted">Confirmação desvio — Flap 2</td></tr>
            <tr><td colspan="4" style="padding:4px;background:var(--bg);"></td></tr>
            <tr><td rowspan="3"><strong>camera08</strong><br><span style="font-size:10px;color:var(--text-muted);">Flap 3</span></td><td class="td-mono" style="font-size:11px;">camera08_entry_from_camera06</td><td class="td-mono" style="font-size:11px;">transfer_entry</td><td class="td-muted">Entrada vinda de camera06</td></tr>
            <tr><td class="td-mono">LC3</td><td class="td-mono" style="font-size:11px;">command</td><td class="td-muted">Comando — Flap 3</td></tr>
            <tr><td class="td-mono" style="font-size:11px;">camera08_exit_to_camera02</td><td class="td-mono" style="font-size:11px;">transfer_exit</td><td class="td-muted">Saída para camera02</td></tr>
            <tr><td colspan="4" style="padding:4px;background:var(--bg);"></td></tr>
            <tr><td rowspan="2"><strong>camera02</strong><br><span style="font-size:10px;color:var(--text-muted);">Flap 4</span></td><td class="td-mono" style="font-size:11px;">camera02_entry_from_camera08</td><td class="td-mono" style="font-size:11px;">transfer_entry</td><td class="td-muted">Entrada vinda de camera08</td></tr>
            <tr><td class="td-mono">LC4</td><td class="td-mono" style="font-size:11px;">command</td><td class="td-muted">Comando — Flap 4</td></tr>
          </tbody>
        </table>
      </div>

      <!-- PMS -->
      <h3 class="sub-title">Base de Dados PMS</h3>
      <p>O catálogo PMS associa cada código de produto SAP às dimensões físicas da cuvete correspondente, permitindo ao sistema determinar o destino de encaminhamento. O catálogo é atualizado pelo perfil <strong>admin</strong> e recarregado automaticamente após substituição do ficheiro, sem necessidade de reiniciar o processamento.</p>

      <div class="table-wrap">
        <table>
          <thead><tr><th>Campo</th><th>Descrição</th></tr></thead>
          <tbody>
            <tr><td class="td-mono">PMS</td><td class="td-muted">Código SAP do produto</td></tr>
            <tr><td class="td-mono">LARGURA</td><td class="td-muted">Largura nominal da cuvete, em milímetros</td></tr>
            <tr><td class="td-mono">COMPRIMENTO</td><td class="td-muted">Comprimento nominal da cuvete, em milímetros</td></tr>
            <tr><td class="td-mono">ALTURA</td><td class="td-muted">Altura nominal da cuvete, em milímetros</td></tr>
            <tr><td class="td-mono">AREA</td><td class="td-muted">Área da base — Largura × Comprimento, em mm²</td></tr>
          </tbody>
        </table>
      </div>

      <div class="info-box green">
        <span class="info-icon"><span class="icon-svg" aria-hidden="true"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"></circle><path d="m8 12.3 2.6 2.6L16 9.5"></path></svg></span></span>
        <span>O painel PMS em tempo real mostra todas as correspondências da sessão corrente — código do produto, peso lido e câmara onde foi registada. Está disponível para todos os perfis (viewer e superiores).</span>
      </div>

      <!-- Histórico -->
      <h3 class="sub-title">Histórico e Exportação</h3>
      <p>Todas as sessões de processamento são registadas automaticamente. No ecrã de histórico é possível consultar cada execução com data, hora, duração e número de correspondências, expandir os detalhes individuais e exportar para CSV ou Excel. A exportação está disponível para <strong>operator</strong> e <strong>admin</strong>. Todas as datas são apresentadas em fuso horário de Portugal (WET/WEST).</p>
    </section>

    <!-- ── 05 · CUVETTE TUNNEL ─────────────────────────────────── -->
    <section class="section" id="tunnel">
      <div class="section-num">05</div>
      <p class="section-eyebrow">05 — Módulo</p>
      <h2 class="section-title">Cuvette Tunnel</h2>
      <p class="section-lead">Monitorização em tempo real do túnel de saída da linha de produção. Deteta anomalias
        automaticamente e gera alarmes em tempo real com gravação de vídeo.</p>

      <!-- Roles -->
      <h3 class="sub-title">Perfis de Acesso</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Perfil</th><th>Permissões</th></tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="role-badge role-admin">admin</span></td>
              <td>Acesso completo: iniciar/parar monitorização, reconhecer alarmes, configurar limiares operacionais e zonas de deteção lado-a-lado.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-operator">operator</span></td>
              <td>Iniciar e parar a monitorização, reconhecer alarmes individualmente ou em conjunto, visualizar a transmissão em direto.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-viewer">viewer</span></td>
              <td>Visualização da transmissão em direto e consulta dos alarmes ativos (apenas leitura).</td>
            </tr>
            <tr>
              <td><span class="role-badge role-emergency">emergency</span></td>
              <td>Visualização do estado atual do túnel.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Start/Stop guide -->
      <h3 class="sub-title" style="margin-top:36px;">Iniciar e Parar a Monitorização</h3>
      <p style="color:var(--text-muted);margin-bottom:18px;">A câmara transmite sempre em direto. A deteção automática de anomalias e geração de alarmes requer que a monitorização esteja ativa.</p>
      <div class="two-col">
        <div>
          <p style="color:var(--green);font-size:12px;letter-spacing:.08em;text-transform:uppercase;margin-bottom:10px;">▶ Iniciar</p>
          <ol style="padding-left:18px;color:var(--text-muted);line-height:1.9;font-size:14px;">
            <li>Aceder ao módulo pelo portal de aplicações</li>
            <li>Verificar que a câmara aparece como <em>conectada</em></li>
            <li>Clicar em <strong style="color:var(--text);">Iniciar Monitorização</strong></li>
            <li>O sistema começa de imediato a detetar anomalias</li>
          </ol>
        </div>
        <div>
          <p style="color:var(--amber);font-size:12px;letter-spacing:.08em;text-transform:uppercase;margin-bottom:10px;">■ Parar</p>
          <ol style="padding-left:18px;color:var(--text-muted);line-height:1.9;font-size:14px;">
            <li>Clicar em <strong style="color:var(--text);">Parar Monitorização</strong></li>
            <li>Os alarmes ativos são automaticamente removidos</li>
            <li>A transmissão de vídeo mantém-se ativa</li>
          </ol>
          <div class="info-box warn-box" style="margin-top:14px;padding:12px 14px;font-size:12.5px;">
            Ao parar a monitorização, todos os alarmes ativos são eliminados. Registe as ocorrências antes de interromper.
          </div>
        </div>
      </div>

      <!-- Alarm types -->
      <h3 class="sub-title" style="margin-top:36px;">Tipos de Alarme</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Alarme</th>
              <th>Gravidade</th>
              <th>Condição</th>
              <th>Descrição</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="role-badge role-emergency">Cuvete Parada</span></td>
              <td style="color:#ef4444;font-size:12px;">Crítico</td>
              <td class="td-mono">≥ 10 s imóvel</td>
              <td class="td-muted">Uma ou mais cuvetes sem movimento detetável pelo tempo configurado. Suprimido enquanto o alarme de excesso estiver ativo.</td>
            </tr>
            <tr>
              <td><span class="role-badge" style="background:rgba(245,158,11,.1);color:var(--amber);border-color:rgba(245,158,11,.25);">Excesso de Cuvetes</span></td>
              <td style="color:var(--amber);font-size:12px;">Aviso</td>
              <td class="td-mono">&gt; 10 cuvetes</td>
              <td class="td-muted">Contagem de cuvetes no túnel superior ao limiar máximo. Suprime o alarme de cuvete parada enquanto ativo.</td>
            </tr>
            <tr>
              <td><span class="role-badge role-operator">Lado-a-Lado</span></td>
              <td style="color:var(--blue);font-size:12px;">Informativo</td>
              <td class="td-mono">Zonas paralelas ocupadas</td>
              <td class="td-muted">Cuvetes presentes simultaneamente nas duas zonas paralelas do túnel. Requer configuração prévia das zonas de deteção.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Alarm acknowledge note -->
      <div class="info-box" style="margin-top:18px;">
        <strong>Reconhecer Alarmes</strong> — Operadores e administradores podem reconhecer alarmes individualmente ou em conjunto. O reconhecimento remove o alarme da lista ativa e interrompe a gravação de vídeo associada. Se a condição persistir, um novo alarme é gerado automaticamente.
      </div>

      <!-- Settings + camera side by side -->
      <div class="two-col" style="margin-top:36px;">
        <div>
          <h3 class="sub-title">Definições Operacionais</h3>
          <p style="color:var(--text-muted);font-size:13px;margin-bottom:14px;">Configuráveis pelo administrador. As alterações entram em vigor imediatamente.</p>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Parâmetro</th><th>Padrão</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>Máximo de cuvetes</td>
                  <td class="td-mono" style="color:var(--amber);">10</td>
                </tr>
                <tr>
                  <td>Tempo de imobilidade</td>
                  <td class="td-mono" style="color:var(--amber);">10 s</td>
                </tr>
                <tr>
                  <td>Período de limpeza</td>
                  <td class="td-mono" style="color:var(--blue);">Diária</td>
                </tr>
                <tr>
                  <td>Hora de limpeza</td>
                  <td class="td-mono" style="color:var(--blue);">03:00</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div>
          <h3 class="sub-title">Câmara do Túnel</h3>
          <div class="camera-card enabled" style="border-top-color: var(--green); margin-top:14px;">
            <div class="cam-id">Tunel2</div>
            <div class="cam-location" style="color:var(--green);">Saída — Túnel 2</div>
            <div class="cam-ip">10.7.2.250 · porta 554</div>
            <div class="cam-status status-on" style="margin-top:8px;">
              <span class="status-led led-on"></span> Câmara dedicada ao túnel de saída
            </div>
            <div class="cam-caps" style="margin-top:10px;">
              <span class="cap-badge">Confiança mín.: 0.70</span>
            </div>
          </div>

          <h3 class="sub-title" style="margin-top:24px;">Zonas Lado-a-Lado</h3>
          <p style="color:var(--text-muted);font-size:13px;line-height:1.7;">Dois polígonos configuráveis delimitam as zonas esquerda e direita do túnel. O administrador define também a direção de fluxo de cada zona para identificar qual a cuvete mais avançada. Reconfigurar após qualquer ajuste físico da câmara.</p>
        </div>
      </div>
    </section>

    <!-- ── 06 · AUTENTICAÇÃO ───────────────────────────────────── -->
    <section class="section" id="autenticacao">
      <div class="section-num">06</div>
      <p class="section-eyebrow">06 — Segurança</p>
      <h2 class="section-title">Autenticação e Controlo de Acesso</h2>
      <p class="section-lead">Sistema centralizado de identidade partilhado por todos os módulos. Um único login, perfis
        de acesso granulares e sessões seguras com duração de 8 horas.</p>

      <!-- Auth flow -->
      <h3 class="sub-title">Fluxo de Acesso</h3>
      <div class="auth-flow">
        <div class="auth-step">
          <div class="auth-circle ac-amber">1</div>
          <div class="auth-body">
            <div class="auth-title">Acesso ao endereço da plataforma</div>
            <div class="auth-detail">O utilizador abre o browser e acede a <strong>https://10.7.3.1/</strong>. Sem sessão ativa, é redirecionado automaticamente para a página de autenticação.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-amber">2</div>
          <div class="auth-body">
            <div class="auth-title">Introdução de credenciais</div>
            <div class="auth-detail">O utilizador introduz o nome de utilizador e a palavra-passe na página de autenticação.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-blue">3</div>
          <div class="auth-body">
            <div class="auth-title">Validação de identidade</div>
            <div class="auth-detail">O sistema verifica as credenciais. Em caso de erro, a página de autenticação é reapresentada com indicação de falha.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-green">4</div>
          <div class="auth-body">
            <div class="auth-title">Sessão criada — 8 horas</div>
            <div class="auth-detail">As credenciais são válidas. O sistema cria uma sessão segura com duração de 8 horas e apresenta o portal de aplicações.</div>
          </div>
        </div>
        <div class="auth-step">
          <div class="auth-circle ac-green">5</div>
          <div class="auth-body">
            <div class="auth-title">Acesso automático em pedidos seguintes</div>
            <div class="auth-detail">Durante a sessão ativa, a plataforma valida automaticamente a identidade do utilizador em cada pedido. O processo é transparente — não é necessário voltar a autenticar.</div>
          </div>
        </div>
      </div>

      <!-- Session management -->
      <div class="two-col" style="margin-top:36px;">
        <div>
          <h3 class="sub-title">Gestão de Sessões</h3>
          <div class="table-wrap" style="margin-top:14px;">
            <table>
              <thead><tr><th>Comportamento</th><th>Detalhe</th></tr></thead>
              <tbody>
                <tr><td>Duração máxima</td><td class="td-mono" style="color:var(--amber);">8 horas</td></tr>
                <tr><td>Expiração</td><td class="td-muted">Pedido seguinte redireciona para login</td></tr>
                <tr><td>Logout explícito</td><td class="td-muted">Opção <strong>Sair</strong> no portal</td></tr>
                <tr><td>Fechar o browser</td><td class="td-muted">Sessão mantém-se ativa até expirar</td></tr>
                <tr><td>Múltiplos dispositivos</td><td class="td-muted">Sessões independentes por dispositivo</td></tr>
              </tbody>
            </table>
          </div>
          <div class="info-box warn-box" style="margin-top:14px;font-size:13px;">
            Em equipamentos partilhados, efectue sempre logout explícito ao terminar. Fechar o browser não encerra a sessão.
          </div>
        </div>
        <div>
          <h3 class="sub-title">Perfis de Utilizador</h3>
          <div class="profile-role-list">
            <div class="profile-role-card">
              <div class="profile-role-title"><span class="role-badge role-admin">admin</span></div>
              <div class="profile-role-desc">Acesso total. Configura todos os módulos, gere utilizadores e perfis. Para responsáveis técnicos.</div>
            </div>
            <div class="profile-role-card">
              <div class="profile-role-title"><span class="role-badge role-operator">operator</span></div>
              <div class="profile-role-desc">Operação completa: inicia/para processamento, configura câmaras, gere alarmes. Para operadores da linha.</div>
            </div>
            <div class="profile-role-card">
              <div class="profile-role-title"><span class="role-badge role-viewer">viewer</span></div>
              <div class="profile-role-desc">Apenas leitura: visualiza interfaces e históricos, sem ações. Para supervisores e auditores.</div>
            </div>
            <div class="profile-role-card">
              <div class="profile-role-title"><span class="role-badge role-emergency">emergency</span></div>
              <div class="profile-role-desc">Acesso de emergência limitado e auditável. Consulta de estado sem permissões operacionais.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Consolidated permissions table -->
      <h3 class="sub-title" style="margin-top:40px;">Tabela de Permissões Consolidada</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Ação</th>
              <th style="text-align:center;"><span class="role-badge role-admin">admin</span></th>
              <th style="text-align:center;"><span class="role-badge role-operator">operator</span></th>
              <th style="text-align:center;"><span class="role-badge role-viewer">viewer</span></th>
              <th style="text-align:center;"><span class="role-badge role-emergency">emergency</span></th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" style="font-size:11px;color:var(--text-muted);letter-spacing:.06em;text-transform:uppercase;padding:10px 12px 4px;">Portal Central</td></tr>
            <tr>
              <td>Aceder ao portal de aplicações</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
            </tr>
            <tr>
              <td>Gerir utilizadores e perfis de acesso</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr><td colspan="5" style="font-size:11px;color:var(--text-muted);letter-spacing:.06em;text-transform:uppercase;padding:10px 12px 4px;">Cuvette Routing</td></tr>
            <tr>
              <td>Visualizar transmissão em direto</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
            </tr>
            <tr>
              <td>Consultar painel e histórico</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr>
              <td>Iniciar e parar o processamento</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr>
              <td>Configurar câmaras e linhas virtuais</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr>
              <td>Gerir a base de dados de produtos (PMS)</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr>
              <td>Calibrar câmaras</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr><td colspan="5" style="font-size:11px;color:var(--text-muted);letter-spacing:.06em;text-transform:uppercase;padding:10px 12px 4px;">Cuvette Tunnel</td></tr>
            <tr>
              <td>Visualizar transmissão em direto</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
            </tr>
            <tr>
              <td>Consultar alarmes ativos</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
            </tr>
            <tr>
              <td>Iniciar e parar a monitorização</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr>
              <td>Reconhecer alarmes</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
            <tr>
              <td>Configurar limiares e zonas de deteção</td>
              <td style="text-align:center;color:var(--green);"><span class="icon-svg check-mark" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="m5 12.5 4.2 4.2L19 7.4"></path></svg></span></td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
              <td style="text-align:center;color:var(--text-muted);">—</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Security best practices -->
      <h3 class="sub-title" style="margin-top:36px;">Boas Práticas de Segurança</h3>
      <div class="two-col">
        <div>
          <p style="font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:12px;">Para Administradores</p>
          <ul style="padding-left:18px;color:var(--text-muted);line-height:2;font-size:13.5px;">
            <li>Atribuir sempre o perfil mínimo necessário (<em>least privilege</em>)</li>
            <li>Criar uma conta individual por pessoa — nunca partilhar credenciais</li>
            <li>Desativar contas imediatamente quando o acesso deixar de ser necessário</li>
            <li>Rever periodicamente a lista de contas ativas e perfis atribuídos</li>
            <li>Forçar redefinição de palavra-passe em caso de suspeita de comprometimento</li>
          </ul>
        </div>
        <div>
          <p style="font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:12px;">Para Todos os Utilizadores</p>
          <ul style="padding-left:18px;color:var(--text-muted);line-height:2;font-size:13.5px;">
            <li>Não divulgar a palavra-passe a terceiros</li>
            <li>Efetuar logout explícito ao terminar a sessão</li>
            <li>Não deixar sessões abertas em equipamentos partilhados</li>
            <li>Comunicar ao administrador qualquer suspeita de acesso indevido</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ── 07 · MANUTENÇÃO ──────────────────────────────────────── -->
    <section class="section" id="manutencao">
      <div class="section-num">07</div>
      <p class="section-eyebrow">07 — Operação</p>
      <h2 class="section-title">Manutenção e Operação</h2>
      <p class="section-lead">Procedimentos de operação diária, atualização da base de dados de produtos, calibração de
        câmaras e resolução de problemas comuns.</p>

      <!-- Service status -->
      <h3 class="sub-title">Verificação do Estado dos Serviços</h3>
      <p style="color:var(--text-muted);font-size:14px;line-height:1.8;margin-bottom:18px;">O portal de aplicações indica em tempo real se cada módulo está operacional. Em operação normal, todos os módulos devem aparecer disponíveis. Dentro de cada módulo, confirmar que as câmaras mostram o estado <em>conectada</em>.</p>
      <div class="info-box warn-box" style="margin-bottom:28px;">
        O reinício dos serviços internos da plataforma é uma operação técnica. Se um módulo aparecer como indisponível de forma persistente, contacte o suporte técnico.
      </div>

      <!-- PMS update -->
      <h3 class="sub-title">Atualização da Base de Dados de Produtos (PMS)</h3>
      <div class="two-col" style="margin-top:16px;">
        <div>
          <p style="font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:10px;">Quando Atualizar</p>
          <ul style="padding-left:18px;color:var(--text-muted);line-height:2;font-size:13.5px;">
            <li>Novo tipo de produto na linha de produção</li>
            <li>Alteração das dimensões de um produto existente</li>
            <li>Remoção de produto que deixe de ser produzido</li>
            <li>Correspondências incorretas ou com confiança baixa sistemática</li>
          </ul>
        </div>
        <div>
          <p style="font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:10px;">Procedimento</p>
          <ol style="padding-left:18px;color:var(--text-muted);line-height:2;font-size:13.5px;">
            <li>Preparar o ficheiro CSV com o formato correto</li>
            <li>Aceder ao Cuvette Routing com perfil <strong style="color:var(--text);">admin</strong></li>
            <li>Carregar o novo ficheiro na secção <strong style="color:var(--text);">PMS</strong></li>
            <li>O sistema recarrega automaticamente em segundos</li>
            <li>Verificar no painel PMS que os novos produtos estão disponíveis</li>
          </ol>
        </div>
      </div>
      <h3 class="sub-title" style="margin-top:28px;">Formato do Ficheiro de Produtos</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Campo</th><th>Unidade</th><th>Descrição</th></tr>
          </thead>
          <tbody>
            <tr><td>Identificador</td><td class="td-mono">—</td><td class="td-muted">Código único de identificação do produto</td></tr>
            <tr><td>Comprimento (C)</td><td class="td-mono">mm</td><td class="td-muted">Dimensão maior da base da cuvete</td></tr>
            <tr><td>Largura (L)</td><td class="td-mono">mm</td><td class="td-muted">Dimensão menor da base da cuvete</td></tr>
            <tr><td>Altura (A)</td><td class="td-mono">mm</td><td class="td-muted">Altura da cuvete (dimensão vertical)</td></tr>
            <tr><td>Código</td><td class="td-mono">—</td><td class="td-muted">Código numérico do produto</td></tr>
            <tr><td>Área</td><td class="td-mono">mm²</td><td class="td-muted">Área da base da cuvete (C × L)</td></tr>
            <tr><td>Rácio</td><td class="td-mono">—</td><td class="td-muted">Proporção entre comprimento e largura (C / L)</td></tr>
          </tbody>
        </table>
      </div>
      <div class="info-box warn-box" style="margin-top:14px;font-size:13px;">
        O ficheiro deve manter rigorosamente a estrutura de colunas definida. Em caso de dúvida, use o ficheiro atual como modelo.
      </div>

      <!-- Calibration -->
      <h3 class="sub-title" style="margin-top:36px;">Calibração de Câmaras</h3>
      <p style="color:var(--text-muted);font-size:14px;line-height:1.8;margin-bottom:16px;">A calibração permite ao sistema converter dimensões em píxeis para milímetros reais no tapete — valor essencial para a correta correspondência com a base de dados de produtos. Operação exclusiva do perfil <strong style="color:var(--text);">admin</strong>.</p>
      <div class="two-col">
        <div>
          <p style="font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:10px;">Quando Recalibrar</p>
          <ul style="padding-left:18px;color:var(--text-muted);line-height:2;font-size:13.5px;">
            <li>Após deslocamento ou reposicionamento físico de câmara</li>
            <li>Após alteração do ângulo ou inclinação</li>
            <li>Após substituição por equipamento diferente</li>
            <li>Quando a confiança das correspondências é sistematicamente baixa sem alterações no PMS</li>
          </ul>
        </div>
        <div>
          <p style="font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:10px;">Procedimento</p>
          <ol style="padding-left:18px;color:var(--text-muted);line-height:2;font-size:13.5px;">
            <li>Parar o processamento</li>
            <li>Aceder às definições da câmara no Cuvette Routing</li>
            <li>Seguir o assistente de calibração na interface</li>
            <li>O sistema guarda automaticamente os novos dados</li>
            <li>Reiniciar o processamento e verificar as correspondências</li>
          </ol>
          <div class="info-box warn-box" style="margin-top:12px;font-size:12.5px;">
            Nunca desloque uma câmara sem recalibrar antes de retomar o processamento — câmaras descalibradas geram encaminhamentos incorretos.
          </div>
        </div>
      </div>

      <!-- Troubleshooting -->
      <h3 class="sub-title" style="margin-top:40px;">Resolução de Problemas Comuns</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Sintoma</th><th>Causa provável</th><th>Ação recomendada</th></tr>
          </thead>
          <tbody>
            <tr>
              <td>Módulo indisponível no portal</td>
              <td class="td-muted">Serviço interno interrompido</td>
              <td class="td-muted">Atualizar a página. Se persistir, contactar o suporte técnico.</td>
            </tr>
            <tr>
              <td>Câmara sem imagem</td>
              <td class="td-muted">Câmara desligada ou problema de rede</td>
              <td class="td-muted">Verificar ligação física e conectividade. Contactar administrador para verificar configuração.</td>
            </tr>
            <tr>
              <td>Processamento não inicia</td>
              <td class="td-muted">Uma ou mais câmaras não conectadas</td>
              <td class="td-muted">Verificar o estado de cada câmara antes de iniciar o processamento.</td>
            </tr>
            <tr>
              <td>Cuvetes sem correspondência no PMS</td>
              <td class="td-muted">Produto não existente na base de dados</td>
              <td class="td-muted">Verificar se o produto está no ficheiro PMS e atualizar se necessário.</td>
            </tr>
            <tr>
              <td>Correspondências com confiança baixa</td>
              <td class="td-muted">PMS desatualizado ou câmara descalibrada</td>
              <td class="td-muted">Atualizar o ficheiro PMS. Se persistir, recalibrar a câmara da zona de pesagem.</td>
            </tr>
            <tr>
              <td>Alarme de cuvete parada frequente sem bloqueio real</td>
              <td class="td-muted">Limiar de imobilidade demasiado baixo</td>
              <td class="td-muted">Aumentar o valor do limiar nas definições do Cuvette Tunnel.</td>
            </tr>
            <tr>
              <td>Alarme de excesso de cuvetes recorrente</td>
              <td class="td-muted">Fluxo de produção elevado ou limiar desadequado</td>
              <td class="td-muted">Verificar fluxo real de produção. Ajustar limiar se necessário.</td>
            </tr>
            <tr>
              <td>Deteção lado-a-lado inativa</td>
              <td class="td-muted">Polígonos de deteção não configurados</td>
              <td class="td-muted">Configurar os polígonos de deteção no módulo Cuvette Tunnel.</td>
            </tr>
            <tr>
              <td>Utilizador sem acesso a funcionalidade esperada</td>
              <td class="td-muted">Perfil de acesso insuficiente ou incorreto</td>
              <td class="td-muted">Administrador deve corrigir os perfis da conta no painel de administração.</td>
            </tr>
            <tr>
              <td>Histórico não apresenta dados</td>
              <td class="td-muted">Processamento nunca iniciado no período consultado</td>
              <td class="td-muted">Confirmar que o processamento foi iniciado e existiram passagens de cuvetes.</td>
            </tr>
            <tr>
              <td>Imagem da câmara deslocada ou distorcida</td>
              <td class="td-muted">Câmara fisicamente movida</td>
              <td class="td-muted">Parar o processamento e recalibrar a câmara antes de retomar.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="info-box" style="margin-top:18px;">
        Para problemas não listados acima, contacte o suporte técnico fornecendo uma descrição detalhada do sintoma, a hora de ocorrência e, se possível, capturas de ecrã da interface.
      </div>
    </section>


  </main>

  <!-- Footer -->
  <footer class="footer">
    <span>Brasmar Platform · Manual de Sistema · v1.0</span>
    <span>Desenvolvido por Termoave LDA</span>
  </footer>

  <script>
    /* ═══════════════════════════════════════════════════════════
       SCROLL PROGRESS + ACTIVE NAV
    ═══════════════════════════════════════════════════════════ */
    const progressBar = document.getElementById('progress-bar');
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-link');

    function updateScroll() {
      const main = document.querySelector('.main');
      const scrollTop = window.scrollY;
      const docH = document.documentElement.scrollHeight - window.innerHeight;
      const pct = docH > 0 ? (scrollTop / docH) * 100 : 0;
      progressBar.style.height = pct + '%';

      // Active nav
      let current = '';
      sections.forEach(s => {
        const top = s.getBoundingClientRect().top;
        if (top <= 100) current = s.id;
      });

      navLinks.forEach(link => {
        link.classList.toggle('active', link.getAttribute('href') === '#' + current);
      });
    }

    window.addEventListener('scroll', updateScroll, { passive: true });
    updateScroll();

    /* ═══════════════════════════════════════════════════════════
       INTERSECTION OBSERVER — section reveal
    ═══════════════════════════════════════════════════════════ */
    const observer = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('visible');
          observer.unobserve(e.target);
        }
      });
    }, { threshold: 0.06 });

    document.querySelectorAll('.section').forEach(s => observer.observe(s));

    /* ═══════════════════════════════════════════════════════════
       SMOOTH SCROLL
    ═══════════════════════════════════════════════════════════ */
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(a.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  </script>
</body>

</html>